<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>インデックス２</title>
    <h:outputScript library="primefaces" name="jquery/jquery.js" />
    <h:outputScript library="js" name="childwindow-opnener.js" />
    <h:outputScript library="js" name="window-controller.js" />
</h:head>

<h:body>
    <p:messages id="messages">
        <p:autoUpdate />
    </p:messages>

    <f:metadata>
        <f:viewAction action="#{index2.init()}" />
    </f:metadata>

    <h:form prependId="false" class="confirm-beforeunload">

        <div>
            <p:autoUpdate />

            <p:inputText id="toChild" value="#{index2.toChild}" />
            <p:message for="toChild" />
        </div>

        <h:outputText value="#{index2.fromChild}"/>

        <p:commandButton value="子画面を開く"
            action="#{index2.showChildWindow()}"
            oncomplete="if (!args.validationFailed) openChildWindow('#{request.contextPath}/childWindow.xhtml', '_child', 'resizable')" />

        <p:commandButton id="refresh" ajax="false" immediate="true" style="visibility: hidden" action="#{index2.refresh()}" />

        <p:commandButton style="visibility: hidden"
            actionListener="#{index2.actionListener}"
            oncomplete="if (!args.validationFailed) $('#action').click()" />

        <p:commandButton value="アクション" action="#{index2.action()}" />

        <p:commandButton ajax="false" value="画面遷移（遷移確認あり）" action="#{index2.go()}" />
        <p:commandButton ajax="false" styleClass="not-confirm" value="画面遷移（遷移確認なし）" action="#{index2.go()}" />

    </h:form>

    <h:form prependId="false">
        <h:inputHidden id="token" value="#{token.token}" />
    </h:form>

</h:body>

</html>
